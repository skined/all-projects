<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title></title>
	<style type="text/css">
	*{
		margin:0;
		padding:0;
	}
		div{
			width:200px;
			height:200px;
			background:red;
			position:absolute;
		}
	</style>
</head>
<body>
	<div id="div1"></div>
	<script src="jquery.js"></script>
<script type="text/javascript">
	var div=document.getElementById('div1');
	div.onmousedown=function(ev){
        var divsX=ev.clientX-this.offsetLeft;
        var divsY=ev.clientY-this.offsetTop;
document.onmousemove=function(ev){
	var left=ev.clientX-divsX;
	var top=ev.clientY-divsY;
	//限制小盒子的移动范围
	if(left<0){
		left=0;
	}else if(left>document.documentElement.clientWidth-div.offsetWidth){
		left=document.documentElement.clientWidth-div.offsetWidth;
	}
	if(top<0){
		top=0;
	}else if(top>document.documentElement.clientHeight-div.offsetHeight){
		top=document.documentElement-div.offsetHeight;
	}
	div.style.left=left+'px';
	div.style.top=top+'px';
	}
	document.onmouseup=function(){
		document.onmousemove=document.onmouseup=null;
	}
	return false;
}

// $(function(){
//   $('#div1').mousedown(function(ev){
//   	   //存储变量
//         var divsX=ev.pageX-$(this).offset().left;
//         var divsY=ev.pageY-$(this).offset().top;
//         $(document).mousemove(function(ev){
//             var left=ev.pageX-divsX;
//             var top=ev.pageY-divsY;
//             $('#div1').css('left',left+'px');
//             $('#div1').css('top',top+'px');
//         })
//         $(document).mouseup(function(){
//         	$(document).off();
//         })
//         return false;
//   })
// })




</script>
</body>
</html>