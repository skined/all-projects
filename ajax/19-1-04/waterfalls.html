<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Document</title>
	<style type="text/css">
       ul{
       	width:1000px;
       	margin:100px auto;
       }
       li{
       	width:265px;
       	list-style:none;
       	float:left;
       	margin-right:5px;
       }
       li div{
       	border:1px solid #ccc;
       	font-size:18px;
       	text-align:center;
       	color:pink;
       	padding:10px;
       }
       li div img{
       	width:225px;
       	height:265px;
       }
	</style>
</head>
<body>
	<ul id="ul1">
		<li>
		 <!-- <div>
		 	<img src="https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3788578920,875289628&fm=26&gp=0.jpg" alt="">
		 	<p>paly basketball</p>
		 </div>	 -->
		  <!-- <div>
		 	<img src="https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2621237255,3018862806&fm=26&gp=0.jpg" alt="">
		 	<p>super star</p>
		 </div>	 -->
		</li>
		<li>
			<!-- <div><img src="https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2463153158,2030697483&fm=26&gp=0.jpg" alt="">
			<p>超级巨星</p></div> -->
			
		</li>
		<li>
			<!-- <div>
		    <img src="https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=338685775,1718706338&fm=26&gp=0.jpg" alt="">
			<p>haloo</p>
			</div> -->
		
		</li>
		<li>
			<!-- <div>
		    <img src="https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=41630630,1291412068&fm=26&gp=0.jpg" alt="">
			<p>sdasddasfdfsd</p>
			</div> -->
			
		</li>
	</ul>
<script src="ajax.js"></script>	
<script type="text/javascript">
	var oUl=document.getElementById('ul1');
	var aLi=oUl.getElementsByTagName('li');
	var iLen=aLi.length;
	ajax('get','getpbl.php','',function(data){
		console.log(data);
		var arr=JSON.parse(data);
		for(i=0;i<arr.length;i++){
		    var index=getShort();
			var p=document.createElement('p');
			var img=document.createElement('img');
			var div=document.createElement('div');
			img.src=arr[i].preview;
			div.appendChild(img);
			p.innerHTML=arr[i].title;
			div.appendChild(p);
			aLi[index].appendChild(div);
		}
	},function(err){
       console.log(err);
	})
	function getShort(){
		var index=0;
		var  ih=aLi[index].offsetHeight;
		for(i=0;i<iLen;i++){
			if(aLi[i].offsetHeight<ih){
				index=i;
				ih=aLi[i].offsetHeight;
			}
		}
		return index;
        //返回最高长度的索引
	}
</script>
</body>
</html>